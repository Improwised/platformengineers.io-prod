<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Orchestrate Container Processes with s6-overlay | Platform Engineers</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" http-equiv="Content-Language" content="en"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" name="format-detection" content="telephone=no"><meta data-n-head="ssr" name="author" content="Platform Engineers"><meta data-n-head="ssr" name="copyright" content="Platform Engineers"><meta data-n-head="ssr" name="robots" content="index, follow"><meta data-n-head="ssr" name="theme-color" content="#179bfd"><meta data-n-head="ssr" name="application-name" content="Platform Engineers"><meta data-n-head="ssr" name="msapplication-TileColor" content="#FFFFFF"><meta data-n-head="ssr" name="msapplication-TileImage" content="/img/favicon/ms-icon-144x144.png"><meta data-n-head="ssr" name="msapplication-square70x70logo" content="/img/favicon/ms-icon-70x70.png"><meta data-n-head="ssr" name="msapplication-square144x144logo" content="/img/favicon/ms-icon-144x144.png"><meta data-n-head="ssr" name="msapplication-square150x150logo" content="/img/favicon/ms-icon-150x150.png"><meta data-n-head="ssr" name="msapplication-square310x310logo" content="/img/favicon/ms-icon-310x310.png"><meta data-n-head="ssr" name="description" content="S6-Overlay offers powerful features like dependency control, graceful shutdown, and log management, making it a game-changer for containerized applications. | Platform Engineers"><meta data-n-head="ssr" name="title" content="Orchestrate Container Processes with s6-overlay | Platform Engineers"><meta data-n-head="ssr" property="og:type" content="website"><meta data-n-head="ssr" property="og:url" content="https://platformengineers.io/blog/s6-overlay-quickstart/"><meta data-n-head="ssr" property="og:title" content="Orchestrate Container Processes with s6-overlay | Platform Engineers"><meta data-n-head="ssr" property="og:description" content="S6-Overlay offers powerful features like dependency control, graceful shutdown, and log management, making it a game-changer for containerized applications. | Platform Engineers"><meta data-n-head="ssr" property="og:image" content="https://platformengineers.io/_nuxt/image/31cb86.png"><meta data-n-head="ssr" property="twitter:card" content="summary"><meta data-n-head="ssr" property="twitter:site" content=""><meta data-n-head="ssr" property="twitter:creator" content=""><meta data-n-head="ssr" property="twitter:title" content="Orchestrate Container Processes with s6-overlay | Platform Engineers"><meta data-n-head="ssr" property="twitter:description" content="S6-Overlay offers powerful features like dependency control, graceful shutdown, and log management, making it a game-changer for containerized applications. | Platform Engineers"><meta data-n-head="ssr" property="twitter:image" content="https://platformengineers.io/_nuxt/image/31cb86.png"><link data-n-head="ssr" href="https://fonts.googleapis.com" rel="preconnect"><link data-n-head="ssr" href="https://maps.googleapis.com" rel="preconnect"><link data-n-head="ssr" href="https://www.gstatic.com" rel="preconnect"><link data-n-head="ssr" rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-icon-57x57.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-icon-60x60.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-icon-72x72.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-icon-76x76.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-icon-114x114.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-icon-120x120.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-icon-144x144.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-icon-152x152.png"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-icon-180x180.png"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/img/favicon/favicon.ico"><link data-n-head="ssr" rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16"><link data-n-head="ssr" rel="icon" type="image/png" href="/img/favicon/favicon-32x32.png" sizes="32x32"><link data-n-head="ssr" rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96"><link data-n-head="ssr" rel="manifest" href="/manifest.json"><link data-n-head="ssr" rel="canonical" href="https://platformengineers.io/blog/s6-overlay-quickstart/"><link data-n-head="ssr" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/monokai-sublime.min.css"><script data-n-head="ssr" type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"Platform Engineers","alternateName":"Platform Engineers","url":"https://platformengineers.io/","image":"https://platformengineers.io/img/plateform-engineers.png","sameAs":[]}</script><link rel="preload" href="/_nuxt/a42967d.js" as="script"><link rel="preload" href="/_nuxt/0f88427.js" as="script"><link rel="preload" href="/_nuxt/css/64240c5.css" as="style"><link rel="preload" href="/_nuxt/990548d.js" as="script"><link rel="preload" href="/_nuxt/b4cbe7a.js" as="script"><link rel="preload" href="/_nuxt/css/998d57e.css" as="style"><link rel="preload" href="/_nuxt/1d8d9a4.js" as="script"><link rel="preload" href="/_nuxt/css/01649ec.css" as="style"><link rel="preload" href="/_nuxt/accecf1.js" as="script"><link rel="stylesheet" href="/_nuxt/css/64240c5.css"><link rel="stylesheet" href="/_nuxt/css/998d57e.css"><link rel="stylesheet" href="/_nuxt/css/01649ec.css"><link rel="preload" href="/_nuxt/static/1721805719/blog/s6-overlay-quickstart/state.js" as="script"><link rel="preload" href="/_nuxt/static/1721805719/blog/s6-overlay-quickstart/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1721805719/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div><link rel="stylesheet" type="text/css" href="/dist/main.min.css" media="all"> <link rel="stylesheet" type="text/css" href="/dist/fontsicon.min.css"></div> <a id="start" rel="nofollow" aria-label="start point of page" href="javscript:void(0);"></a> <div class="main-container blog"><div class="blog-bk"><div class="nav-container"><div class="bar bar--sm visible-xs"><div class="container"><div class="row align-items-center"><div class="col-3 col-md-2"><a href="/"><img src="/_nuxt/image/e7b705.png" alt="Platform Engineers" loading="lazy" title="Platform Engineers"></a></div> <div class="col-9 col-md-10 text-right"><a href="#" aria-label="toggle" data-toggle-class="#menu1;hidden-xs" class="hamburger-toggle"><i class="icon icon--sm stack-interface stack-menu"></i></a></div></div></div></div> <nav id="menu1" data-scroll-class="366px:pos-fixed" class="bar bar--sm bar-1 hidden-xs"><div class="container"><div class="row align-items-center"><div class="hidden-xs d-flex align-items-center"><div class="bar__module"><a href="/"><img src="/_nuxt/image/418082.png" width="68" height="55" alt="Platform Engineers" loading="lazy" title="Platform Engineers"></a></div></div> <div class="col text-right text-left-xs text-left-sm"><div class="bar__module"><ul class="menu-horizontal text-left"><li><a href="/">Home</a></li> <li><a href="/about-us/">About Us</a></li> <li class="dropdown"><span class="dropdown__trigger">Services</span> <div class="dropdown__container"><div class="container"><div class="row"><div class="mt-1 dropdown__content col-lg-3 col-md-4 col-sm-6 p-3"><ul class="menu-vertical"><li><a href="/assessment/">Cost Assessment</a></li> <li><a href="/assessment/">Performance Assessment</a></li> <li><a href="/services/platform-engineering/">Platform Engineering</a></li><li><a href="/services/kubernetes-consulting-services/">Kubernetes Consulting</a></li><li><a href="/services/containerization/">Containerization</a></li><li><a href="/services/performance-optimization/">Performance Optimization</a></li><li><a href="/services/ci-cd-implementation/">CI/CD Implementation</a></li><li><a href="/services/infrastructure-maintenance-and-support/">Infra Maintenance & Support</a></li></ul></div></div></div></div></li> <li class="dropdown"><span class="dropdown__trigger">Industries</span> <div class="dropdown__container"><div class="container"><div class="row"><div class="mt-1 dropdown__content col-lg-3 col-md-4 col-sm-6 p-3"><ul class="menu-vertical"><li><a href="/industries/IoT/">IoT</a></li><li><a href="/industries/ecommerce/">eCommerce</a></li><li><a href="/industries/fintech/">FinTech</a></li><li><a href="/industries/enterprise/">Enterprise</a></li><li><a href="/industries/SaaS/">SaaS</a></li><li><a href="/industries/IOT-kubernetes-backup-and-recovery/">IOT</a></li></ul></div></div></div></div></li> <li><a href="/blog/">Blog</a></li> <li><a href="/case-studies/">Case Studies</a></li></ul></div> <div class="bar__module"><div><a href="/contact-us/" title="contact" class="btn btn--primary type--uppercase b-30"><span class="btn__text"> Contact us </span></a></div></div></div></div></div></nav></div> <div class="container"><div class="row py-2"><div class="col-md-6 d-flex align-items-center justify-content-center"><div><h1 class="h2 mb-0">S6-Overlay quickstart</h1> <div class="lh-1 mb-3">
          Wed, 08/11/2023 |
          4 minutes
        </div> <!----> <!----> <div class="row"><div class="col-lg-4 col-md-12"><div class="d-flex align-items-center mt-3"><div class="d-flex align-items-center mr-2" style="border-radius:200px"><img src="/_nuxt/image/08abe5.png" width="32" height="40" alt="S6-Overlay quickstart" title="S6-Overlay quickstart" class="p-0 m-0 rounded author-s"></div> <div><strong class="m-0 p-0 lh-1">
                  Munir
                  Khakhi
                </strong></div></div></div></div> <!----></div></div> <div class="col-md-6 d-flex align-items-center justify-content-center"><img src="/_nuxt/image/e2eace.png" height="400" alt="S6-Overlay quickstart | Platform Engineers" decoding="async" class="img-dim" style="color:transparent"></div></div></div></div> <section class="bg-- wave-bk-1 section-padding"><div class="container"><div class="row"><div class="col-lg-10 offset-lg-1 bs-11 p-5 b-30 bg-white"><div class="fc-lead ul-list"><h2 dir="ltr" style="font-size:22px"><strong>What is S6-Overlay?</strong></h2>
<p dir="ltr">S6-overlay is a container-focused process manager that offers end-to-end management of the container's lifecycle, from initialization to graceful shutdown. Its innovative design and feature set make it a compelling alternative to other process managers, such as supervisord. But what sets it apart from the rest? Let's explore its key features.</p>
<h3 dir="ltr"><strong>Key Features of S6-Overlay</strong></h3>
<p dir="ltr"><strong>Versatile Process Management:</strong> S6-overlay efficiently handles both one-time tasks and long-running processes, making it versatile for <a href="https://platformengineers.io/services/containerization" target="_blank" rel="noopener">containerized tasks</a>.</p>
<p dir="ltr"><strong>Dependency Control:</strong> Establish dependencies between processes to ensure orderly execution in complex application stacks.</p>
<p dir="ltr"><strong>Sequence Management: </strong>Control the start and stop sequence of processes, streamlining container operations.</p>
<p dir="ltr"><strong>Environment Variable Templating:</strong> Easily customize process behavior with environment variables, adapting to different environments.</p>
<p dir="ltr"><strong>Easy Integration:</strong> Seamlessly integrate S6-overlay into Docker images with a straightforward installation process.</p>
<p dir="ltr"><strong>Log Management:</strong> Built-in log rotation simplifies log file management within container environments.</p>
<p dir="ltr"><strong>Graceful Shutdown:</strong> Ensure data integrity with graceful process shutdown and the ability to execute custom scripts before container shutdown.</p>
<p dir="ltr"><strong>Multi-Arch Support:</strong> S6-overlay accommodates the diverse landscape of container <a href="https://platformengineers.io/services/infrastructure-maintenance-and-support" target="_blank" rel="noopener">platforms with support </a>for multi-architecture container images.</p>
<h3 dir="ltr"><strong>Directory Structure of S6-Overlay</strong></h3>
<p dir="ltr">S6-overlay's directory structure sets it apart from other process managers, providing flexibility for process management in container environments. The base directory, /etc/s6-overlay/s6-rc, serves as the starting point. To manage processes effectively, create a directory for each process you wish to run. Within these directories, several key files play essential roles:</p>
<p dir="ltr"><strong>Type File:</strong></p>
<p dir="ltr">Define the nature of your process by writing either "oneshot" or "longrun." Use "oneshot" for tasks that run as initializations before primary processes. For continuous daemon processes supervised by S6, choose "longrun."</p>
<p dir="ltr"><strong>Up File:</strong></p>
<p dir="ltr">In this file, specify the file path of your script. This path guides S6 to run the script. If left blank, S6 will consider the "run" file as your script.</p>
<p dir="ltr"><strong>Run File:</strong></p>
<p dir="ltr">Here, you write the script or process that your container executes. If necessary, you can utilize environment variables and the <a href="https://skarnet.org/software/execline/execlineb.html">execlineb</a> command for added flexibility.</p>
<p dir="ltr"><strong>Dependencies Directory:</strong></p>
<p dir="ltr">The dependencies.d directory plays a crucial role when your process relies on another. To establish dependencies, create empty files named after the processes your task depends on. Multiple files can be created when a process depends on more than one other process.</p>
<p dir="ltr">This directory structure simplifies the organization and execution of processes within your containerized environment, enhancing control and flexibility.</p>
<p>Finally, it will look like below</p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">s6-overlay
└── s6-rc.d
    ├── init-nginx
    │   ├── dependencies.d
    │   │   └── base
    │   ├── run
    │   ├── type
    │   └── up
    ├── init-php82-fpm
    │   ├── dependencies.d
    │   │   └── init-nginx
    │   ├── run
    │   ├── type
    │   └── up
    ├── init-usermod
    │   ├── dependencies.d
    │   │   └── init-nginx
    │   ├── run
    │   ├── type
    │   └── up
    ├── svc-nginx
    │   ├── dependencies.d
    │   │   ├── init-nginx
    │   │   └── svc-php82-fpm
    │   ├── run
    │   └── type
    ├── svc-php82-fpm
    │   ├── dependencies.d
    │   ├── run
    │   └── type
    ├── svc-stdout
    │   ├── dependencies.d
    │   │   ├── svc-nginx
    │   │   └── svc-php82-fpm
    │   ├── run
    │   └── type
    └── user
        └── contents.d
            ├── init-nginx
            ├── init-php82-fpm
            ├── init-usermod
            ├── svc-nginx
            ├── svc-php82-fpm
            └── svc-stdout</code></pre>
</div>
<p dir="ltr"><strong>Installing S6</strong></p>
<p dir="ltr">S6-overlay is distributed in several tar files, each with a <a href="https://github.com/just-containers/s6-overlay?tab=readme-ov-file#installation" target="_self">detailed description</a>. The choice of which tar file to install depends on your specific requirements:</p>
<p dir="ltr">To utilize scripts with environment variables, you should install the symlinks tar files.</p>
<p dir="ltr">If you are running daemons that cannot log to stderr to take advantage of the s6 logging infrastructure, and rely on the old syslog() mechanism, consider installing the syslog-overlay-noarch tar file.</p>
<p dir="ltr">Here is a sample Dockerfile code snippet to install S6-overlay in your Docker image,</p>
<p><strong id="docs-internal-guid-304629f9-7fff-4b58-9703-30876d7ce914"></strong>You can find the full image <a href="https://github.com/Improwised/docker-php-base/tree/s6-php82" target="_self">here</a>.</p>
<div class="code-block with-line-numbers" data-language="bash">
<pre><code spellcheck="false">FROM alpine:3.18

ARG S6_OVERLAY_VERSION="3.1.5.0"
ARG S6_OVERLAY_ARCH="x86_64"

# add s6 overlay
ADD https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-noarch.tar.xz /tmp
RUN tar -C / -Jxpf /tmp/s6-overlay-noarch.tar.xz
ADD https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-${S6_OVERLAY_ARCH}.tar.xz /tmp
RUN tar -C / -Jxpf /tmp/s6-overlay-${S6_OVERLAY_ARCH}.tar.xz

# add s6 optional symlinks
ADD https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-symlinks-noarch.tar.xz /tmp
RUN tar -C / -Jxpf /tmp/s6-overlay-symlinks-noarch.tar.xz
ADD https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/s6-overlay-symlinks-arch.tar.xz /tmp
RUN tar -C / -Jxpf /tmp/s6-overlay-symlinks-arch.tar.xz
ADD https://github.com/just-containers/s6-overlay/releases/download/v${S6_OVERLAY_VERSION}/syslogd-overlay-noarch.tar.xz /tmp
RUN tar -C / -Jxpf /tmp/syslogd-overlay-noarch.tar.xz
</code></pre>
</div>
<p dir="ltr">In a production environment, when running PHP applications, it becomes essential to employ PHP-FPM. This is due to PHP's single-threaded nature, which can limit its ability to efficiently handle heavy traffic while conserving memory and CPU resources. In such scenarios, S6-overlay proves to be an ideal choice for managing these applications. In this example, we will demonstrate how to set up PHP-FPM alongside <a href="https://www.nginx.com/" target="_blank" rel="noopener">Nginx</a> using S6-overlay. </p>
<h3 dir="ltr"><strong>Installing PHP and Nginx</strong></h3>
<p dir="ltr">To install PHP and Nginx, you can use a package manager. In our case, we are utilizing an Alpine base image, making it convenient to use the apk package manager.</p>
<div class="code-block with-line-numbers" data-language="bash">
<pre><code spellcheck="false"># Install OS Dependencies
RUN set -ex \
  && apk add --no-cache --virtual .build-deps \
    autoconf automake build-base python3 gmp-dev \
    curl \
    tar \
  && apk add --no-cache --virtual .run-deps \
    nodejs npm \
    # PHP and extensions
    php82 php82-bcmath php82-ctype php82-curl php82-dom php82-exif php82-fileinfo \
    php82-fpm php82-gd php82-gmp php82-iconv php82-intl php82-mbstring \
    php82-mysqlnd php82-mysqli php82-opcache php82-openssl php82-pcntl php82-pecl-apcu php82-pdo php82-pdo_mysql \
    php82-phar php82-posix php82-session php82-simplexml php82-sockets php82-sqlite3 php82-tidy \
    php82-tokenizer php82-xml php82-xmlreader php82-xmlwriter php82-zip php82-pecl-xdebug php82-pecl-redis php82-soap php82-sodium php82-pdo_sqlite php82-pdo_pgsql php82-pgsql \
    # Other dependencies
    mariadb-client sudo shadow \
    # Miscellaneous packages
    bash ca-certificates dialog git libjpeg libpng-dev openssh-client vim wget shadow \
    # Nginx
    nginx \
    # Create directories
  && mkdir -p /etc/nginx \
    && mkdir -p /run/nginx \
    && mkdir -p /etc/nginx/sites-available \
    && mkdir -p /etc/nginx/sites-enabled \
    && rm -Rf /var/www/* \
    && rm -Rf /etc/nginx/nginx.conf \
  # Composer
  && wget https://composer.github.io/installer.sig -O - -q | tr -d '\n' > installer.sig \
    && php82 -r "copy('https://getcomposer.org/installer', 'composer-setup.php');" \
    && php82 -r "if (hash_file('SHA384', 'composer-setup.php') === file_get_contents('installer.sig')) { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;" \
    && php82 composer-setup.php --install-dir=/usr/bin --filename=composer \
    && php82 -r "unlink('composer-setup.php'); unlink('installer.sig');" \
  # Cleanup
  && apk del .build-deps</code></pre>
</div>
<p dir="ltr">Here we also installed Nodejs and npm as we are using this image for the Laravel app in which frontend files will be built using vite.</p>
<p dir="ltr">Now we need PHP-FPM and Nginx config.  Generally, we kept in base image repo in the following directory structure</p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">└── rootfs
    └── etc
        ├── nginx
        │   ├── nginx.conf
        │   ├── sites-available
        │   │   └── default.conf
        │   └── sites-enabled
        ├── php82
        │   ├── conf.d
        │   ├── php-fpm.conf
        │   ├── php-fpm.d
        │   │   └── www.conf
        │   └── php.ini
        ├── s6-overlay
        │   └── s6-rc.d</code></pre>
</div>
<p>So we added that using the below line in the Dockerfile</p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">ADD rootfs /</code></pre>
</div>
<h3 dir="ltr">Setting Users & Permissions in Your Image</h3>
<p dir="ltr">By default, Docker runs containers with root privileges. While this is suitable for local development, where <a href="https://platformengineers.io/blog/internal-developer-platform" target="_blank" rel="noopener">developers</a> may need to install new packages or edit configs, it is not recommended for production environments. Allowing anyone with access to the container to add packages or change permissions can pose security risks.</p>
<p dir="ltr">To address this, it's advisable to run your processes as non-root users. To achieve this, we utilize the following script to set the User ID (UID) and Group ID (GID) of the "nginx" user and group. This script is included in the S6-overlay, ensuring that it runs as a one-shot task before the start of PHP-FPM and Nginx.</p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">#!/usr/bin/with-contenv bash
# shellcheck shell=bash

UID=${UID:-911}
GID=${GID:-911}

usermod -u "$UID" nginx && groupmod -g "$GID" nginx</code></pre>
</div>
<p>In that script, you can use the environment variables that you passed to your container. i.e</p>
<p><code class="inline" spellcheck="false">docker run --name s6-app -e UID -e GID -p 8888:80 -v .:/var/www</code></p>
<h3 dir="ltr">Process Sequences</h3>
<p dir="ltr">When you are running multiple processes, it becomes essential to ensure they run in a specific sequence. S6-overlay simplifies the process of defining and controlling the sequence in which these processes operate.</p>
<p dir="ltr">For instance, if your Nginx process depends on an initialization process for Nginx, it's straightforward to establish the sequence, ensuring that the necessary processes start in the correct order. </p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">cd svc-nginx
mkdir dependencies.d
touch init-nginx svc-php82-fpm</code></pre>
</div>
<p>Now, <code class="inline" spellcheck="false">svc-nginx</code> will start only after <code class="inline" spellcheck="false">init-nginx</code> will be completed(as it is oneshot) and <code class="inline" spellcheck="false">svc-php82-fpm</code> will be in a running state.</p>
<h3><span class="heading-content">Graceful Shutdown</span></h3>
<p dir="ltr">A graceful shutdown is crucial for preserving the proper state of data and responses when a container exits. S6-overlay simplifies this process by supporting the use of variables like S6_SERVICES_GRACETIME and S6_KILL_GRACETIME to set a graceful exit time frame. Additionally, S6-overlay allows you to customize the exit code that the container returns upon termination. You can achieve this by creating a "finish" script in your process directory.</p>
<p dir="ltr">For instance, in cases where you are running a non-critical process, you can use the finish script to specify a return status of 0. The inclusion of a finish script is optional but valuable when you need to modify the exit code or execute specific cleanup tasks during the container's shutdown.</p>
<div class="code-block with-line-numbers" data-language="bash">
<pre><code spellcheck="false">#!/bin/sh

echo "0" > /run/s6-linux-init-container-results/exitcode</code></pre>
</div>
<h3><span class="heading-content">Extending Image</span></h3>
<p dir="ltr">S6-overlay's directory-based structure offers a straightforward method for extending this image from another base image. You can effortlessly create multiple images by adding additional processes without overwriting existing configurations in S6-overlay.</p>
<div class="code-block with-line-numbers" data-language="javascript">
<pre><code spellcheck="false">COPY svc-crond /etc/s6-overlay/s6-rc.d/svc-crond</code></pre>
</div>
<h3><span class="heading-content">Summary</span></h3>
<p dir="ltr">For many years, we relied on Supervisor in our production environments. However, it became evident that the Supervisor could not address all the challenges we encountered.</p>
<p dir="ltr">This is where S6-overlay emerged as a modern alternative, offering a comprehensive solution to our process management needs.</p>
<p dir="ltr">S6-overlay's versatility and ease of use make it a perfect choice, particularly for container images that require the execution of multiple processes. </p></div> <hr> <div class="d-flex align-items-center flex-wrap"></div> <hr> <div class="article__share mt-0"><ul class="social-list list-inline list--hover blog_social" style="margin:0!important;padding:0!important"><li class="list-inline-item mr-0"><a href="javascript:void(0)" class="share-network-email"><i class="socicon socicon-google icon icon--xs"></i></a></li> <li class="list-inline-item mr-0"><a href="javascript:void(0)" class="share-network-linkedin"><i class="socicon socicon-linkedin icon icon--xs"></i></a></li> <li class="list-inline-item mr-0"><a href="javascript:void(0)" class="share-network-twitter"><i class="socicon socicon-twitter icon icon--xs"></i></a></li> <li class="list-inline-item mr-0"><a href="javascript:void(0)" class="share-network-facebook"><i class="socicon socicon-facebook icon icon--xs"></i></a></li> <li class="list-inline-item mr-0"><a href="javascript:void(0)" class="share-network-whatsapp"><i class="socicon socicon-whatsapp icon icon--xs"></i></a></li></ul></div></div></div></div></section></div> <footer class="pt-4 pb-0 footer-2 bg--dark" data-v-1a1e3611><div class="container" data-v-1a1e3611><div class="row" data-v-1a1e3611><div class="col-md-3 col-sm-6 col-12 mb-5" data-v-1a1e3611><h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Company</h3> <ul class="list--hover mb-1" data-v-1a1e3611><li data-v-1a1e3611><a href="/about-us/" data-v-1a1e3611>About Us</a></li></ul> <ul class="list--hover d-flex mt-2 icons" data-v-1a1e3611><li data-v-1a1e3611><a href="https://www.facebook.com/profile.php?id=61555276800801" title="Platform Engineers facebook page" target="_blank" data-v-1a1e3611><i class="socicon socicon-facebook icon icon--xs" data-v-1a1e3611></i></a></li> <li class="px-2" data-v-1a1e3611><a href="https://twitter.com/platform_engr" title="Platform Engineers twitter account" target="_blank" data-v-1a1e3611><i class="socicon socicon-twitter icon icon--xs" data-v-1a1e3611></i></a></li> <li class="px-1" data-v-1a1e3611><a href="https://www.linkedin.com/company/platform-engineers/mycompany/" title="Platform Engineers linkedin page" target="_blank" data-v-1a1e3611><i class="socicon socicon-linkedin icon icon--xs" data-v-1a1e3611></i></a></li></ul> <h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Resources</h3> <ul class="list--hover" data-v-1a1e3611><li data-v-1a1e3611><a href="/blog/" data-v-1a1e3611>Blog</a></li> <li data-v-1a1e3611><a href="/case-studies/" data-v-1a1e3611>Case Studies</a></li></ul></div> <div class="col-md-3 col-sm-6 col-12 mb-5" data-v-1a1e3611><h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Services</h3> <ul class="list--hover" data-v-1a1e3611><li data-v-1a1e3611><a href="/services/platform-engineering/" data-v-1a1e3611>Platform Engineering</a></li><li data-v-1a1e3611><a href="/services/kubernetes-consulting-services/" data-v-1a1e3611>Kubernetes Consulting</a></li><li data-v-1a1e3611><a href="/services/containerization/" data-v-1a1e3611>Containerization</a></li><li data-v-1a1e3611><a href="/services/performance-optimization/" data-v-1a1e3611>Performance Optimization</a></li><li data-v-1a1e3611><a href="/services/ci-cd-implementation/" data-v-1a1e3611>CI/CD Implementation</a></li><li data-v-1a1e3611><a href="/services/infrastructure-maintenance-and-support/" data-v-1a1e3611>Infra Maintenance & Support</a></li></ul></div> <div class="col-md-3 col-sm-6 col-12 mb-5" data-v-1a1e3611><h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Industries</h3> <ul class="list--hover" data-v-1a1e3611><li data-v-1a1e3611><a href="/industries/IoT/" data-v-1a1e3611>IoT</a></li><li data-v-1a1e3611><a href="/industries/ecommerce/" data-v-1a1e3611>eCommerce</a></li><li data-v-1a1e3611><a href="/industries/fintech/" data-v-1a1e3611>FinTech</a></li><li data-v-1a1e3611><a href="/industries/enterprise/" data-v-1a1e3611>Enterprise</a></li><li data-v-1a1e3611><a href="/industries/SaaS/" data-v-1a1e3611>SaaS</a></li><li data-v-1a1e3611><a href="/industries/IOT-kubernetes-backup-and-recovery/" data-v-1a1e3611>IOT</a></li></ul></div> <div class="col-md-3 col-sm-6 col-12 mb-5" data-v-1a1e3611><h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Support</h3> <ul class="list--hover" data-v-1a1e3611><li data-v-1a1e3611><a href="/contact-us/" data-v-1a1e3611>Contact Us</a></li></ul> <h3 class="type--uppercase m-0 h6" data-v-1a1e3611>Assessment</h3> <ul class="list--hover" data-v-1a1e3611><li data-v-1a1e3611><a href="/assessment/" data-v-1a1e3611>Cost Assessment</a></li> <li data-v-1a1e3611><a href="/assessment/" data-v-1a1e3611>Performance Assessment</a></li></ul></div></div></div> <div class="sub-footer mt-3" data-v-1a1e3611><div class="col-md-12 text-center" data-v-1a1e3611><span class="type--fine-print" data-v-1a1e3611>© <span class="update-year" data-v-1a1e3611></span> Platform Engineers</span></div></div></footer> <a href="#start" data-scroll-class="100vh:active" title="click & go to top of the page" aria-label="click & go to top of the page" class="back-to-top inner-link"><i class="stack-interface stack-up-open-big"></i></a></div></div></div><script defer src="/_nuxt/static/1721805719/blog/s6-overlay-quickstart/state.js"></script><script src="/_nuxt/a42967d.js" defer></script><script src="/_nuxt/1d8d9a4.js" defer></script><script src="/_nuxt/accecf1.js" defer></script><script src="/_nuxt/0f88427.js" defer></script><script src="/_nuxt/990548d.js" defer></script><script src="/_nuxt/b4cbe7a.js" defer></script><script data-n-head="ssr" src="https://www.googletagmanager.com/gtag/js?id=G-LRC7N9VH4L" data-body="true"></script><script data-n-head="ssr" src="/google-tag.js" data-body="true"></script><script data-n-head="ssr" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" data-body="true"></script><script data-n-head="ssr" src="/js/hljs.js" data-body="true"></script>
  </body>
</html>
